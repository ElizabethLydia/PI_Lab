# 🩺 PTT血压测量完整研究方案

## 📖 研究背景与意义

### 脉搏波传导时间（PTT）原理
PTT是指脉搏波从心脏射血开始到外周动脉感受到脉搏波的传播时间。根据Moens-Korteweg方程：
```
PTT = D / PWV
其中：PWV = √(Eh/2ρr)
```
- D: 血管长度
- PWV: 脉搏波传播速度
- E: 血管弹性模量  
- h: 血管壁厚度
- ρ: 血液密度
- r: 血管半径

血压升高→血管弹性↓→PWV↑→PTT↓，建立PTT与血压的反比关系。

## 🎯 研究目标

### 主要目标
1. **多传感器PTT计算**：4个传感器×3种光谱 = 12种PTT组合
2. **多光谱PTT对比**：红光、红外、绿光的PTT差异性分析
3. **个体化血压模型**：针对不同生理状态的适应性建模
4. **实时血压预测**：构建可用于连续血压监测的算法

### 创新点
- **多位置PTT矩阵**：构建传感器间PTT网络
- **光谱特异性**：不同波长的血管穿透深度差异
- **多模态融合**：PTT + 心率变异性 + 运动状态
- **深度学习建模**：时序神经网络捕获动态特征

## 🔬 研究方法详解

### 1. PTT计算方法体系

#### 方法A：传统单点PTT
```python
# R峰-PPG足点PTT (经典方法)
ptt_classical = t_ppg_foot - t_ecg_r_peak
```

#### 方法B：多点PPG-PTT
```python
# 不同位置传感器间PTT
for sensor1 in ['sensor2', 'sensor3', 'sensor4', 'sensor5']:
    for sensor2 in sensors[sensors.index(sensor1)+1:]:
        ptt_multi = calculate_delay(ppg[sensor1], ppg[sensor2])
```

#### 方法C：多光谱PTT
```python
# 同一位置不同光谱的传播差异
for sensor in sensors:
    ptt_red_ir = delay(ppg[sensor]['red'], ppg[sensor]['ir'])
    ptt_ir_green = delay(ppg[sensor]['ir'], ppg[sensor]['green'])
    ptt_red_green = delay(ppg[sensor]['red'], ppg[sensor]['green'])
```

#### 方法D：集成PTT特征
```python
# 综合多种PTT信息
ptt_ensemble = weighted_average([
    ptt_classical, ptt_multi, ptt_spectral
])
```

### 2. 特征工程策略

#### 时域特征
- **脉搏间期**：连续心跳间时间变化
- **PTT变异性**：PTT的时间变异性（PTTV）
- **幅度特征**：脉搏波幅度与PTT的关联

#### 频域特征  
- **PTT功率谱**：PTT序列的频域分析
- **呼吸调制**：呼吸对PTT的周期性影响
- **低频/高频比**：自主神经活动指标

#### 非线性特征
- **PTT熵**：PTT序列复杂度
- **分形维数**：PTT时间序列的分形特性
- **样本熵**：PTT规律性度量

### 3. 机器学习建模策略

#### 传统机器学习
```python
models = {
    'LinearRegression': 基础线性回归,
    'Ridge/Lasso': L1/L2正则化,
    'RandomForest': 集成树模型,
    'SVR': 支持向量回归,
    'XGBoost': 梯度提升
}
```

#### 深度学习模型
```python
# LSTM时序模型
model = Sequential([
    LSTM(64, return_sequences=True),
    Dropout(0.2),
    LSTM(32),
    Dense(16, activation='relu'),
    Dense(1)  # 血压输出
])

# CNN-LSTM混合模型
model = Sequential([
    Conv1D(filters=32, kernel_size=3),
    MaxPooling1D(2),
    LSTM(50),
    Dense(1)
])
```

### 4. 个体化校准策略

#### 在线学习方法
```python
# 增量学习适应个体差异
model.partial_fit(new_data, new_target)
```

#### 迁移学习
```python
# 从群体模型迁移到个体
base_model = load_population_model()
personal_model = fine_tune(base_model, personal_data)
```

## 📊 实验设计

### 数据集划分
- **条件1,7**：静息状态（基线数据）
- **条件2-6,8-11**：不同运动强度
- **训练集**：70%实验条件
- **验证集**：15%实验条件  
- **测试集**：15%实验条件

### 评估指标
```python
metrics = {
    'MAE': mean_absolute_error,      # 平均绝对误差
    'RMSE': root_mean_squared_error, # 均方根误差
    'MAPE': mean_absolute_percentage_error,  # 平均绝对百分比误差
    'R²': coefficient_determination,  # 决定系数
    'ICC': intraclass_correlation,   # 组内相关系数
    'Bland_Altman': 一致性分析
}
```

### 临床验证标准
- **AAMI标准**：MAE < 5mmHg, SD < 8mmHg
- **BHS标准**：Grade A (MAE < 5mmHg)
- **ESH标准**：≥85%测量误差在±10mmHg内

## 🔄 研究实施步骤

### 阶段1：特征提取与PTT计算 (1-2周)
1. 实现多种PTT计算算法
2. 提取时域、频域、非线性特征
3. 数据质量评估与异常值处理

### 阶段2：建模与验证 (2-3周)  
1. 传统机器学习模型对比
2. 深度学习模型构建
3. 交叉验证与超参数优化

### 阶段3：个体化与优化 (1-2周)
1. 个体化校准策略
2. 实时预测算法优化
3. 鲁棒性测试

### 阶段4：临床验证与部署 (1周)
1. 临床标准评估
2. 算法封装与部署
3. 用户界面开发

## 📈 预期成果

### 学术成果
1. **顶级期刊论文**：IEEE TBME, Nature Biomedical Engineering
2. **会议论文**：EMBC, CinC, BSN
3. **专利申请**：多传感器PTT血压测量方法

### 技术成果
1. **PTT血压算法库**：开源工具包
2. **实时监测系统**：可穿戴设备集成
3. **临床决策支持**：血压异常预警系统

### 应用前景
- **医疗设备**：连续血压监测仪
- **消费电子**：智能手表血压功能
- **远程医疗**：家庭血压管理
- **运动健康**：运动生理监测

## 🚀 下一步执行计划

立即可执行的具体步骤：

1. **运行PTT特征提取**
```bash
python ptt_bp_research_framework.py
```

2. **分析多传感器PTT矩阵**
```bash
python multi_sensor_ptt_analysis.py
```

3. **构建血压预测模型**
```bash
python bp_prediction_models.py
```

4. **个体化校准验证**
```bash
python personalized_calibration.py
```

这个研究方案将为PTT血压测量提供系统性的科学方法和工程实现，有望在无创血压监测领域取得重要突破！ 