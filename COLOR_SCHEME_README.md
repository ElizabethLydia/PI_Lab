# 散点图颜色方案说明

## 🎨 颜色设计原则

为了让不同实验和不同受试者的散点图更容易区分，我们采用了以下颜色方案：

## 🔵 实验1 (蓝色)
- **拟合线**: 蓝色，透明度0.8
- **标签**: "Exp 1 Fit"

## 🔴 实验7 (红色)
- **拟合线**: 红色，透明度0.8
- **标签**: "Exp 7 Fit"

## ⚫ 整体拟合 (黑色)
- **拟合线**: 黑色，透明度0.8
- **标签**: "Overall Fit"
- **使用场景**: 跨实验分析时

## 📊 应用场景

### 1. Step3 Moved (单个实验分析)
- 每个实验单独生成散点图
- 实验1使用蓝色拟合线，实验7使用红色拟合线
- 数据点使用默认颜色

### 2. Step4 Moved (跨实验分析)

#### 单实验拟合分析
- **数据点**: 按受试者用不同颜色（palette='tab20'）
- **拟合线**: 实验1用蓝色，实验7用红色
- 每个实验单独一张图，便于比较不同受试者

#### 跨实验拟合分析
- **数据点**: 按受试者用不同颜色（palette='tab20'）
- **拟合线**: 黑色，表示整体拟合
- 所有实验在一张图中，便于比较不同受试者

#### 静止实验分析
- **数据点**: 按受试者用不同颜色（palette='tab20'）
- **拟合线**: 黑色，表示整体拟合
- 按受试者分组显示，便于比较不同受试者

## 🎯 颜色选择理由

1. **蓝色 (实验1)**: 代表稳定、可靠，适合作为基准实验
2. **红色 (实验7)**: 代表对比、变化，便于与实验1区分
3. **黑色 (整体拟合)**: 代表综合、整体，适合跨实验分析
4. **受试者颜色 (tab20)**: 20种不同颜色，便于区分不同受试者
5. **透明度设置**: 避免数据点重叠时看不清

## 📈 图表效果

### 单实验图
- 不同受试者用不同颜色
- 拟合线用实验特定颜色
- 便于分析每个实验内不同受试者的表现

### 跨实验图
- 不同受试者用不同颜色
- 黑色拟合线显示整体趋势
- 便于比较不同受试者在不同实验中的表现

## 🔧 技术实现

### Seaborn散点图
```python
# 按受试者着色
sns.scatterplot(data=pair_df, x='ptt_ms', y=col, 
               hue='subject', palette='tab20', alpha=0.6, s=50)
```

### Matplotlib拟合线
```python
# 实验特定颜色
plt.plot(x_range, y_pred, color=exp_color, 
         linewidth=2, alpha=0.8, label=f'{exp_label} Fit')

# 整体拟合
plt.plot(x_range, y_pred, color='black', 
         linewidth=2, alpha=0.8, label='Overall Fit')
```

## 💡 使用建议

1. **单实验分析**: 关注每个实验内不同受试者的表现差异
2. **跨实验比较**: 关注不同受试者在不同实验中的表现变化
3. **整体趋势**: 关注所有数据的综合表现
4. **受试者识别**: 通过颜色快速识别特定受试者的数据点

## 📝 总结

这个颜色方案让不同受试者的数据在视觉上更容易区分，同时保持了图表的一致性和专业性。实验1和7的拟合线用不同颜色，而数据点按受试者用不同颜色，让分析结果更加直观和易读。
